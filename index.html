<!DOCTYPE html>
<html>
<head>
  <title>NeoClaw Guardian Demo</title>
</head>

<body style="font-family: Arial; padding: 40px">

<h2>ğŸ‘¶ NeoClaw Child Safety Guardian</h2>

<h3>Child Chat</h3>
<textarea id="chat" rows="4" cols="50" placeholder="Child types message..."></textarea>

<h3>Incoming Message (Simulate Friend / Stranger)</h3>
<input id="incoming" placeholder="Simulate incoming message"/>
<button onclick="checkIncoming()">Send</button>

<h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent Dashboard</h3>
<div id="dashboard"></div>

<script>
const chat = document.getElementById("chat")
const incoming = document.getElementById("incoming")
const dashboard = document.getElementById("dashboard")

let incidents = []
let riskScore = 0


// ===============================
// CHILD MESSAGE CHECK
// ===============================
chat.addEventListener("input", async () => {
  const text = chat.value
  if (!text) return

  const harmful = await checkWithAI(text)

  if (harmful) {
    showWarning("âš  You are sending harmful content.")
    saveIncident("Child Sent", text)
    increaseRisk()
  }
})


// ===============================
// INCOMING MESSAGE CHECK
// ===============================
async function checkIncoming() {
  const text = incoming.value
  if (!text) return

  const harmful = await checkWithAI(text)

  if (harmful) {
    showWarning("âš  Harmful message received. Stay safe.")
    saveIncident("Received", text)
    increaseRisk()
  }
}


// ===============================
// FAKE AI MODERATION (Hackathon Demo)
// ===============================
async function checkWithAI(text) {
  text = text.toLowerCase()

  const harmfulPatterns = [
    "stupid",
    "idiot",
    "kill",
    "hate",
    "die",
    "hurt",
    "loser",
    "worthless",
    "shut up",
    "ugly",
    "dumb",
    "go away",
    "nobody likes you"
  ]

  return harmfulPatterns.some(word => text.includes(word))
}


// ===============================
// UI FUNCTIONS
// ===============================
function showWarning(text) {
  const message = document.createElement("div")

  message.innerHTML = `<b>${text}</b>`
  message.style.position = "fixed"
  message.style.top = "20px"
  message.style.right = "20px"
  message.style.background = "red"
  message.style.color = "white"
  message.style.padding = "15px"
  message.style.zIndex = "9999"

  document.body.appendChild(message)
  setTimeout(() => message.remove(), 4000)
}

function saveIncident(type, text) {
  incidents.push({
    type,
    message: text,
    time: new Date().toLocaleString()
  })

  updateDashboard()
}

function increaseRisk() {
  riskScore += 10
}

function updateDashboard() {
  dashboard.innerHTML = `
    <h4>Risk Score: ${riskScore}</h4>
    ${incidents.map(i => `<p>âš  ${i.type}: ${i.message} â€” ${i.time}</p>`).join("")}
  `
}
</script>

</body>
</html>
